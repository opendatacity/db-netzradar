function CanvasLayer(a){function b(a){if(Array.isArray(a[0])){var c=1e100,d=1e100,e=-1e100,f=-1e100;return a.forEach(function(a){var g=b(a);c>g.x0&&(c=g.x0),d>g.y0&&(d=g.y0),e<g.x1&&(e=g.x1),f<g.y1&&(f=g.y1)}),{x0:c,y0:d,x1:e,y1:f,padding:0}}for(var c=1e100,d=1e100,e=-1e100,f=-1e100,g=0;g<a.length;g+=2){var h=a[g+0]/1e6+.527917,i=a[g+1]/1e6+.333428;a[g+0]=h,a[g+1]=i,c>h&&(c=h),h>e&&(e=h),d>i&&(d=i),i>f&&(f=i)}return{x0:c,y0:d,x1:e,y1:f,padding:0}}a||(a=[]);var c={},d=256;L.Browser.retina&&(d*=2);var e=L.tileLayer.canvas({async:!0,tileSize:256}),f=[];return a.forEach(function(a,b){switch(a[1][0]){case 0:a.geoType="line";break;case 1:a.geoType="polygon";break;case 2:a.geoType="mpolygon";break;case 3:a.geoType="point";break;case 4:a.geoType="bezierq";break;case 5:a.geoType="bezierc";break;default:throw new Error(a.geometry.type)}var c=a[1][1];"bezierq"==a.geoType&&(0==c[0]&&0==c[1]&&(c[0]=f[4],c[1]=f[5]),c[2]+=c[0],c[3]+=c[1],c[4]+=c[2],c[5]+=c[3],f=c),"bezierc"==a.geoType&&(0==c[0]&&0==c[1]&&(c[0]=f[6],c[1]=f[7]),c[2]+=c[0],c[3]+=c[1],c[4]+=c[2],c[5]+=c[3],c[6]+=c[4],c[7]+=c[5],f=c),a.coordinates=c}),a.forEach(function(a,c){a.box=b(a.coordinates),"point"==a.geoType&&(a.box.padding=200),a.style||(a.style={})}),e.drawTile=function(b,f,g){function h(b,d,e){if(5>e)return a;var f=[e,b,d].join("_");if(!c[f]){var g=h(Math.floor(b/2),Math.floor(d/2),e-1),i=Math.pow(2,e+8),j=5,k=256*b/i-j/i,l=256*d/i-j/i,m=256*(b+1)/i+j/i,n=256*(d+1)/i+j/i;c[f]=g.filter(function(a){var b=a.box.padding/i;return a.box.x0>m+b?!1:a.box.x1<k-b?!1:a.box.y0>n+b?!1:a.box.y1<l-b?!1:!0})}return c[f]}function i(){function a(a,b){s[a]||(s[a]=[]),s[a].push(b)}function b(a,b){s[a]||(s[a]=[]),s[a].unshift(b)}function c(a,b){s[a]=[b]}function e(a){a.forEach(function(a,b){var c=(a[0]-l)*k,d=(a[1]-m)*k;0==b?j.moveTo(c,d):j.lineTo(c,d)})}function i(a){var b=(a[0]-l)*k,c=(a[1]-m)*k,d=(a[2]-l)*k,e=(a[3]-m)*k,f=(a[4]-l)*k,g=(a[5]-m)*k;j.moveTo(b,c),j.quadraticCurveTo(d,e,f,g)}function n(a){var b=(a[0]-l)*k,c=(a[1]-m)*k,d=(a[2]-l)*k,e=(a[3]-m)*k,f=(a[4]-l)*k,g=(a[5]-m)*k,h=(a[6]-l)*k,i=(a[7]-m)*k;j.moveTo(b,c),j.bezierCurveTo(d,e,f,g,h,i)}function o(a){for(var b=0;b<a.length;b+=2){var c=(a[b+0]-l)*k,d=(a[b+1]-m)*k;0==b?j.moveTo(c,d):j.lineTo(c,d)}var c=(a[0]-l)*k,d=(a[1]-m)*k;j.lineTo(c,d)}function p(a){a.strokeStyle&&(j.lineWidth=a.lineWidth||1,j.strokeStyle=a.strokeStyle,j.stroke())}function q(a){a.fillStyle&&(j.fillStyle=a.fillStyle,j.fill())}j.clearRect(0,0,d,d),L.Browser.retina&&j.setTransform(2,0,0,2,0,0);var r=h(f.x,f.y,g),s=[];r.forEach(function(d,f){if(d.style){var h=5*(d.style.layer||0);switch(d.geoType){case"line":if(!d.style.strokeStyle)return;d.style.heterogeneous?a(h+3,function(){j.beginPath(),e(d.coordinates),p(d.style)}):(c(h+0,function(){j.beginPath()}),a(h+1,function(){e(d.coordinates)}),c(h+2,function(){p(d.style)}));case"bezierq":if(!d.style.strokeStyle)return;d.style.heterogeneous?a(h+3,function(){j.beginPath(),i(d.coordinates),p(d.style)}):(c(h+0,function(){j.beginPath()}),a(h+1,function(){i(d.coordinates)}),c(h+2,function(){p(d.style)}));break;case"bezierc":if(!d.style.strokeStyle)return;d.style.heterogeneous?a(h+3,function(){j.beginPath(),n(d.coordinates),p(d.style)}):(c(h+0,function(){j.beginPath()}),a(h+1,function(){n(d.coordinates)}),c(h+2,function(){p(d.style)}));break;case"polygon":a(h+0,function(){j.beginPath(),d.coordinates.forEach(o),q(d.style),p(d.style)});break;case"mpolygon":if("xs"!==d.properties.resolution)return;a(h+0,function(){j.beginPath(),d.coordinates.forEach(function(a){a.forEach(o)}),q(d.style),p(d.style)});break;case"point":if(d.style.visibilityLevel&&d.style.visibilityLevel>g)return;if(!d.style.label)return;var r=(d.coordinates[0]-l)*k,s=(d.coordinates[1]-m)*k;b(h,function(){j.font=d.style.font;var a=j.measureText(d.style.label).width,b=11,c=5,e=3;j.beginPath(),j.moveTo(r,s),j.lineTo(r-2,s-3),j.lineTo(r-12,s-3),j.lineTo(r-12,s-3-b-2*e),j.lineTo(r-12+a+2*c,s-3-b-2*e),j.lineTo(r-12+a+2*c,s-3),j.lineTo(r+2,s-3),j.closePath(),j.fillStyle=d.style.fillStyle,j.shadowColor="rgba(0,0,0,0.3)",j.shadowBlur=5,j.shadowOffsetX=1,j.shadowOffsetY=1,j.fill(),j.shadowColor="rgba(0,0,0,0)",j.fillStyle=d.style.fontFill,j.fillText(d.style.label,r-12+c,s-3-e-.15*b)})}}}),s.forEach(function(a){a&&a.forEach(function(a){a()})})}L.Browser.retina&&(b.width=d,b.height=d,b.style.width="256px",b.style.height="256px");var j=b.getContext("2d");j.lineCap="round",j.lineJoin="round";var k=Math.pow(2,g+8),l=256*f.x/k,m=256*f.y/k;i(),e.tileDrawn(b)},{layer:e}}
function DataLoader(){return!this instanceof DataLoader?new DataLoader:this}DataLoader.prototype.get=function(a,b){$.ajax({method:"GET",url:a,dataType:/\.json($|\?)/.test(a)?"json":"text",crossDomain:!0,success:function(a,c,d){b(null,a)},error:function(){b(!0)}})},DataLoader.prototype.check=function(a,b){$.ajax({method:"HEAD",url:a,dataType:"json",crossDomain:!0,success:function(a,c,d){if(200===d.status||304===d.status){try{var e=new Date(d.getResponseHeader("Last-modified")).valueOf()}catch(f){return b(f)}return b(null,e)}b(!0)},error:function(a){return b(a)}})},DataLoader.prototype.retrieve=function(a,b){var c=this;if(!c.hasLocalStorage())return b(null);try{var d=JSON.parse(localStorage.getItem(a))}catch(e){return b(null)}return b(d)},DataLoader.prototype.getData=function(a,b,c){var d=this,e=b;return d.retrieve(e,function(b){return null===b||b.ts<(new Date).valueOf()-864e5?void d.check(a,function(f,g){return f?b?c(null,b.data):c(f):void(null===b||g>b.ts?d.get(a,function(a,b){return a?c(a):(d.hasLocalStorage()&&(localStorage.clear(),localStorage.setItem(e,JSON.stringify({ts:(new Date).valueOf(),data:b}))),void c(null,b))}):c(null,b.data))}):c(null,b.data)}),this},DataLoader.prototype.hasLocalStorage=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(a){return!1}},DataLoader.prototype.hash=function(a){var b,c,d,e=0;if(0==a.length)return e;for(b=0,d=a.length;d>b;b++)c=a.charCodeAt(b),e=(e<<5)-e+c,e|=0;return Math.abs(e).toString(36)};
function TrackLayer(a,b,c,d){function e(b,e){var j=b||"a";e&&(j+=",n4");var k=c.values[j],l=c.qualities[j];switch(g&&a.removeLayer(g.layer),b=null){case"1":var m=chroma.interpolate.bezier(["#222222","#666666","#ff0088"]);break;case"2":var m=chroma.interpolate.bezier(["#222222","#666666","#ff0011"]);break;case"3":var m=chroma.interpolate.bezier(["#222222","#666666","#00dd99"]);break;case"7":var m=chroma.interpolate.bezier(["#222222","#666666","#0099ff"]);break;default:var m=chroma.interpolate.bezier(["#ee1100","#ffaa00","#55dd00"])}h.forEach(function(a,b){var c=l[b];if(1>c)return a.style=i;var e,g,h=Math.pow(k[b],f);if(d){var j=Math.round(2*h);h=j/2,e=j+2,g=3}else e=2,g=Math.min(5,Math.sqrt(c/10)+1);a.style&&1!=a.style.layer||(a.style={}),a.style.strokeStyle=m(h).css(),a.style.lineWidth=g,a.style.layer=e,a.style.heterogeneous=!d}),a.addLayer(g.layer,{async:!0})}var f=Math.log(.5)/Math.log(.95),g=new CanvasLayer(b),h=b.filter(function(a){return 1==a[0][0]}),i={strokeStyle:"rgba(61,110,153,0.9)",lineWidth:1,layer:1};return b.forEach(function(a){switch(a[0][0]){case 0:return a.style={strokeStyle:"rgba(151,182,209,0.05)",lineWidth:10,fillStyle:"#dceaf5",layer:0};case 1:return a.style=i;case 2:return a.style={visibilityLevel:[0,6,8,9,10,11,12][a[0][1]],fillStyle:"rgba(255,255,255,0.7)",label:a[0][2],font:'11px "DB Office", "Helvetica"',fontFill:"#000",layer:5}}}),{setFilter:e,layer:g.layer}}
$(document).ready(function(){"use strict";function a(){l&&m&&(t||(n=new TrackLayer(s,l,m,g),n.layer.once("load",function(){window.hasOwnProperty("P3JsInterface")&&window.P3JsInterface.hasOwnProperty("hideLoader")&&"function"==typeof window.P3JsInterface.hideLoader&&window.P3JsInterface.hideLoader(),1===$("#spinner").length&&j.removeClass("wait")}),b(),t=!0))}function b(){n&&c(function(){n.setFilter(p.provider,!p.lte)})}function c(a){window.requestAnimationFrame?window.requestAnimationFrame(a):window.setImmediate?window.setImmediate(a):window.setTimeout(a,0)}var d="assets/data/",e=!1,f=function(){var a=navigator.userAgent.toLowerCase();if(a.indexOf("windows nt")>=0||a.indexOf("macintosh")>=0||a.indexOf("linux x86_64")>=0)return e=!0,"1000";if(a.indexOf("iphone")>=0||a.indexOf("ipad")>=0){try{if(parseFloat(a.match(/OS ([0-9]+)/i)[1])>=6)return"2000"}catch(b){}return"2000"}if(a.indexOf("android")>=0){try{if(parseFloat(a.match(/Android ([0-9]+)/i)[1])>4)return"2000"}catch(b){}return"4000"}return"4000"}(),g=parseFloat(f)>2e3;f="data"+f+".json","_filename"in window&&void 0!=_filename&&(f=_filename,g=!0);var h=["js","canvas","canvastext","backgroundsize","localstorage","cors","bgsizecover"],i=0,j=$("html");j.addClass("js").removeClass("nojs");for(var k=0;k<h.length;k++)j.hasClass(h[k])&&i++;if(i<h.length)return void j.addClass("please-upgrade");window.hasOwnProperty("P3JsInterface")&&window.P3JsInterface.hasOwnProperty("showLoader")&&"function"==typeof window.P3JsInterface.showLoader&&window.P3JsInterface.showLoader(),1===$("#spinner").length&&j.addClass("wait");var l,m,n,o=new DataLoader,p={provider:"a",lte:!0};if(window.hasOwnProperty("insInfo")&&"string"==typeof window.insInfo.netop&&""!==window.insInfo.netop){switch(window.insInfo.netop.toString()){case"26201":p.provider="1";break;case"26202":p.provider="2";break;case"26203":p.provider="3";break;case"26207":p.provider="7"}p.lte="lte"===window.insInfo.nettype.toLowerCase(),$("body").addClass("provider-"+p.provider)}var q=L.latLngBounds(L.latLng(46,5),L.latLng(56,17)),r=function(){var a=$(window).width(),b=$(window).height();return 540>a?5:550>b?5:960>a?6:960>b?6:1920>a?7:1920>b?7:8}(),s=L.map("map",{zoomAnimation:e,minZoom:r,maxZoom:12,maxBounds:q,zoomControl:!1,attributionControl:!1});s.fitBounds(q),s.setZoom(r);var t=!1;o.getData(d+f,"data",function(b,c){if(b)try{c=_data}catch(d){}l=c.geo,m=c.values,a()});var u=s.getMinZoom(),v=s.getMaxZoom(),w=$("a.zoom-in","#sidebar"),x=$("a.zoom-out","#sidebar");w.click(function(a){a.preventDefault(),s.zoomIn()}),x.click(function(a){a.preventDefault(),s.zoomOut()}),s.on("zoomend",function(){switch(w.removeAttr("disabled"),x.removeAttr("disabled"),s.getZoom()){case u:x.attr("disabled","disabled");break;case v:w.attr("disabled","disabled")}}).fire("zoomend");var y=$(".provider-list a","#providers");y.each(function(a,c){var d=$(c);d.click(function(a){a.preventDefault(),$(this).blur(),p.provider!==d.attr("data-provider")&&(y.removeClass("active"),d.addClass("active").blur(),p.provider=d.attr("data-provider"),$("body").removeClass(function(a,b){return(b.match(/(^|\s)provider-\S+/g)||[]).join(" ")}).addClass("provider-"+p.provider),b())})});var z=$("a.lte-toggle","#lteswitch");z.click(function(a){a.preventDefault(),z.toggleClass("active").blur(),p.lte=z.hasClass("active"),b()});var A=$("a.locate","#locate"),B=null,C=null,D=null,E=null,F=null;A.click(function(a){if(a.preventDefault(),A.blur(),navigator.geolocation)if(A.toggleClass("active"),A.hasClass("active")){null!==B&&s.removeLayer(B);var b=function(a){E=L.latLng(a.coords.latitude,a.coords.longitude),q.contains(E)&&(F=parseInt(a.coords.accuracy,10),!isNaN(F)&&F>1e3?C||isNaN(F)?(C.setLatLng(E),C.setRadius(F)):C=L.circle(E,F,{stroke:!1,fill:"rgba(0,135,255,0.1)",clickable:!1}).addTo(s):C&&(s.removeLayer(C),C=null),null===B&&(B=L.marker(E,{clickable:!1,icon:L.icon({iconUrl:"assets/images/locationmarker-foreground.png",iconRetinaUrl:"assets/images/locationmarker-foreground.png",iconSize:[50,50],iconAnchor:[9,9],popupAnchor:[-3,-76],shadowUrl:"assets/images/locationmarker-shadow.png",shadowRetinaUrl:"assets/images/locationmarker-shadow.png",shadowSize:[50,50],shadowAnchor:[9,9]})}).addTo(s),B.setLatLng(E),s.setView(E,12)))};(!window.hasOwnProperty("insInfo")||!window.insInfo.hasOwnProperty("disableTracking")||window.insInfo.disableTracking!==!0&&"true"!==window.insInfo.disableTracking)&&(D=navigator.geolocation.watchPosition(b,function(){},{enableHighAccuracy:!0,maximumAge:6e4})),window.hasOwnProperty("insInfo")&&window.insInfo.hasOwnProperty("lng")&&!window.insInfo.hasOwnProperty("lon")&&(window.insInfo.lon=window.insInfo.lng),window.hasOwnProperty("insInfo")&&window.insInfo.hasOwnProperty("lat")&&0!==parseFloat(window.insInfo.lat)&&0!==parseFloat(window.insInfo.lon)&&q.contains(L.latLng(parseFloat(window.insInfo.lat),parseFloat(window.insInfo.lon)))&&b({coords:{latitude:parseFloat(window.insInfo.lat),longitude:parseFloat(window.insInfo.lon),accuracy:window.insInfo.acc}})}else(!window.hasOwnProperty("insInfo")||!window.insInfo.hasOwnProperty("disableTracking")||window.insInfo.disableTracking!==!0&&"true"!==window.insInfo.disableTracking)&&navigator.geolocation.clearWatch(D),s.removeLayer(B),null!==C&&s.removeLayer(C),D=null,B=null,C=null}),window.hasOwnProperty("insInfo")&&window.insInfo.hasOwnProperty("enableTracking")&&(window.insInfo.enableTracking!==!0||"true"!==window.insInfo.enableTracking)&&$(".show-geolocation","#container").hide(),window.enableGps=function(a){A.removeClass("active"),a||A.addClass("active"),A.trigger("click")},$("body").hasClass("standalone")&&($(".nav-content .close","#container").click(function(a){a.preventDefault();var b=$(this).closest(".nav-content");b.fadeOut("fast"),$("header nav a").removeClass("active")}),$("header nav a").each(function(a,b){var c=$(b),d=$(c.attr("data-show"));c.click(function(a){a.preventDefault(),c.blur(),c.hasClass("active")?(d.fadeOut("fast"),c.removeClass("active")):($("header nav a").removeClass("active"),$(".nav-content","#container").each(function(a,b){$(b).fadeOut("fast")}),c.addClass("active"),d.fadeIn("fast"))})})),$("body").hasClass("mobile")&&($("#providers .provider-list").slick({prevArrow:"#providers .provider-prev",nextArrow:"#providers .provider-next",initialSlide:function(){return"a"===p.provider?0:$("#providers .provider-list a[data-provider="+p.provider+"]").index()}()}).on("afterChange",function(a,c,d){var e=$(".provider-list .slick-active","#providers");p.provider!==e.attr("data-provider")&&(y.removeClass("active"),e.addClass("active"),p.provider=e.attr("data-provider"),$("body").removeClass(function(a,b){return(b.match(/(^|\s)provider-\S+/g)||[]).join(" ")}).addClass("provider-"+p.provider),b())}),window.hasOwnProperty("insInfo")&&window.insInfo.hasOwnProperty("zoom")&&window.insInfo.zoom===!1||j.addClass("zoom")),z.removeClass("active"),p.lte&&z.addClass("active"),$("a","#providers").click(function(a){$(this).blur()})});